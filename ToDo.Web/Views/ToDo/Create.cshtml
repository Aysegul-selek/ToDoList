@model ToDoAPI.Entities.DTOs.ToDo.TodoCreateDTO


<div class="container mt-5">
    <div class="card shadow-lg border-0" style="border-radius:15px;">
        <div class="card-header text-white" style="background: linear-gradient(90deg, #8B4513, #D2691E); border-radius:15px 15px 0 0;">
            <h4 class="mb-0"><i class="mdi mdi-plus-circle-outline"></i> Create New ToDo</h4>
        </div>
        <div class="card-body p-4">

         
            <div class="form-group mb-3">
                <label class="fw-bold">Title</label>
                <input type="text" id="Title" class="form-control" placeholder="Enter title" required />
            </div>

            <div class="form-group mb-3">
                <label class="fw-bold">Description</label>
                <textarea id="Description" class="form-control" placeholder="Enter description" rows="3" required></textarea>
            </div>

            <div class="form-group mb-3">
                <label class="fw-bold">User ID</label>
                <input type="number" id="UserId" class="form-control" placeholder="Enter user ID" required />
            </div>

            <div class="form-group mb-3">
                <label class="fw-bold">User Name</label>
                <input type="text" id="UserName" class="form-control" placeholder="Enter user name" required />
            </div>

            <div class="form-group mb-3">
                <label class="fw-bold">Status</label>
                <select id="Status" class="form-control" required>
                    <option value="1">ToDo</option>
                    <option value="2">Planning</option>
                    <option value="3">InProgress</option>
                    <option value="4">OnHold</option>
                    <option value="5">Done</option>
                </select>
            </div>

          
            <div class="d-flex justify-content-between mt-4">
                <a href="/Todo/TodoList" class="btn btn-secondary px-4">Back to List</a>
                <button class="btn btn-warning px-4" onclick="createTodo()">Save Todo</button>
            </div>

        </div>
    </div>
</div>

<script>
    async function createTodo() {
        const payload = {
            Title: document.getElementById("Title").value,
            Description: document.getElementById("Description").value,
            UserId: parseInt(document.getElementById("UserId").value),
            UserName: document.getElementById("UserName").value,
            Status: parseInt(document.getElementById("Status").value)
        };

        try {
            const response = await fetch("https://localhost:44305/api/Todo", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(payload)
            });

            if (response.ok) {
                alert("Todo created successfully!");
                window.location.href = "/Todo/TodoList"; 
            } else {
                const errText = await response.text();
                alert("Create failed: " + errText);
            }
        } catch (err) {
            console.error(err);
            alert("An error occurred while creating the todo.");
        }
    }
</script>
